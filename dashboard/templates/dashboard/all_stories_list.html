
{% extends 'dashboard/dashboard_base.html' %}
{% load staticfiles %}
<head>
{% block title %}
    Your Stories | Dashboard | Ritrew - Poem, Story, and Riddle.
{% endblock %}
</head>
<body>
{% block content_header %}

    <div id="wrapper">
    {% block d_nav_bar %}
        <!-- Navigation -->
        {% include "dashboard/d_nav_bar.html" %}
    {% endblock d_nav_bar %}
        <div id="page-wrapper">
            <div class="container-fluid">
                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header pull-right" >
                        <a href="{% url 'dashboard:new_story' %}" type="button" class="btn btn-primary"><i class="fa fa-plus"></i> Add New</a>
                        <a href="{% url 'writer:story_list' %}" type="button" class="btn btn-info"><i class="fa fa-eye"></i> Visit Page</a>
                        <!-- For creating a new instance. Custom for all types of forms. -->
                        </h1>
                        <h1 class="page-header">
                            {{ content_name }}
                            <small>{{ content_name_detail }}</small>
                        </h1>
                        <ol class="breadcrumb">
                            <li>
                                <i class="fa fa-dashboard"></i>  <a href="{% url 'dashboard:list' %}">Dashboard</a>
                            </li>
                            <li class="active">
                                <i class="fa fa-file"></i> {{ content_name }}
                            </li>
                        </ol>
                    </div>

<!-- ########### S T O R I E S    P A G E ################## -->
                    {% if name == 'd_a_story' %}
                        <div class="col-lg-11">
                            <div class="jumbotron">
                                <h3>Report</h3>
                                {% if stories.count < 1 %}
                                    <p>Looks like you have not yet published any Stories,<br> Heres, a Guide for you to get started.<br></p>
                                    <ol>
                                        <li>Click on Add new button on the top right corner of this page.</li>
                                        <li>Write your Title, Story and choose Related Story in the appropriate blanks on the new pages that opens up.</li>
                                        <li>Select "Show Story" in the last line.</li>
                                        <li>CLick on "Publish New Story".</li>
                                        <li>???</li>
                                        <li>Profit.</li>
                                    </ol>
                                {% else %}                                
                                    <p>You have written a total of 
                                    <b>{{ stories|length }}</b>
                                    stor{{ stories|pluralize:"y,ies" }}
                                    since dd-mm-yy, of which 
                                    <b>
                                        {% if story_published|length == stories|length %}
                                            all 
                                        {% else %}
                                            {{ story_published|length }}
                                        {% endif %}
                                    </b>
                                    {{ story_published|pluralize:"is,are" }}<!-- This will automatically choose is or are depending on number -->                            
                                    published and 
                                    <b>
                                        {% if story_draft|length == 0 %}
                                            none 
                                        {% else %} 
                                            {{story_draft|length}}
                                        {% endif %}
                                    </b>
                                    {{ story_draft|pluralize:"is,are" }}<!-- This will automatically choose is or are depending on number -->                            
                                    in draft.</p>
                                {% endif %}
                            </div>
                        </div>

<!-- ########################          A L L    D R A F T    S T O R Y     ########################## -->
                        
                        {% if story_draft %}
                            <div class="col-lg-11">
                                <h2>Story Drafts</h2>
                                <div class="table-responsive">
                                    <table class="table table-bordered table-hover table-striped">
                                        <thead>
                                            <tr>
                                                <th>sno</th>
                                                <th>Story Title</th>
                                                <th>Created</th>
                                                <th>Last Edit</th>
                                                <!-- <th>View</th> -->
                                                <th>Edit</th>
                                                <th>Publish</th>                     
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for p in story_draft %}
                                                <tr>
                                                    <td>{{ forloop.counter }}</td>
                                                    <td>{{ p.title}}</td>
                                                    <td>
                                                        {{ p.timestamp|timesince }} ago
                                                    </td>
                                                    <td>{{ p.updated|timesince }} ago</td>
                                                    <!-- <td>
                                                        <a href="{{ p.get_absolute_url }}" class="button btn btn-info"><i class="fa fa-fw fa-eye"></i></a>
                                                    </td> -->
                                                    <td>
                                                        <a href="{{ p.get_edit_url }}" class="button btn btn-warning"><i class="fa fa-fw fa-pencil"></i></a>
                                                    </td>
                                                    <td>
                                                        <a href="{{ p.get_draft_toggle_url }}" class="button btn btn-danger"><i class="fa fa-fw fa-clipboard"></i></a>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                <br>
                            </div>
                        <!-- /.table div for draft story -->
                        {% endif %}

<!-- ####################      A L L    P U B L I S H E D    S T O R Y        ######################### -->

                        {% if story_published|length != 0 and story_published|length != stories|length %}
                            <div class="col-lg-11">
                                <h2>Published Stories</h2>
                                <div class="table-responsive">
                                    <table class="table table-bordered table-hover table-striped">
                                        <thead>
                                            <tr>
                                                <th>sno</th>
                                                <th>Story Title</th>
                                                <th>Wah! Wah!</th>
                                                <th>Published</th>
                                                <th>View</th>
                                                <th>Edit</th> 
                                                <th>Draft</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for p in story_published %}
                                                <tr>
                                                    <td>{{ forloop.counter }}</td>
                                                    <td>{{ p.title}}</td>
                                                    <td>
                                                        NUM 32 wah
                                                    </td>
                                                    <td>{{ p.updated|timesince }} ago</td>
                                                    <td>
                                                        <a href="{{ p.get_absolute_url }}" class="button btn btn-info"><i class="fa fa-fw fa-eye"></i></a>
                                                    </td>
                                                    <td>
                                                        <a href="{{ p.get_edit_url }}" class="button btn btn-warning"><i class="fa fa-fw fa-pencil"></i></a>
                                                    </td>
                                                    <td>
                                                        <a href="{{ p.get_draft_toggle_url }}" class="button btn btn-danger"><i class="fa fa-fw fa-clipboard"></i></a>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                <br>
                            </div>
                        <!-- /.table div for published story -->
                        {% endif %}

<!-- ############################     A L L      S T O R Y        ########################## -->
                        {% if stories|length != 0 %}
                            <div class="col-lg-11">
                                <h2>{{content_name}}</h2>
                                <div class="table-responsive">
                                    <table class="table table-bordered table-hover table-striped">
                                        <thead>
                                            <tr>
                                                <th>sno</th>
                                                <th>Story Title</th>
                                                <th>Last Modified</th>
                                                <!-- <th>Status </th> -->
                                                <th>View</th>
                                                <th>Edit</th>
                                                <th>Draft/Publish</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for p in stories %}
                                                <tr>
                                                    <td>{{ forloop.counter }}</td>
                                                    <td>{{ p.title }}</td>
                                                    <td>{{ p.updated|timesince }}</td>
                                                    <!-- <td>
                                                        {% if p.show_story == True %}
                                                                <span class="label label-success">Published</span>
                                                            {% else %}
                                                                <span class="label label-warning">DRAFT</span>
                                                        {% endif %}
                                                    </td> -->
                                                    <td>
                                                        {% if p.show_story == True %}
                                                            <a href="{{ p.get_absolute_url }}" class="button btn btn-info"><i class="fa fa-fw fa-eye"></i></a>
                                                        {% else %}
                                                            <span class="label label-warning">DRAFT</span>
                                                        {% endif %}
                                                    </td>
                                                    <td>
                                                        <a href="{{ p.get_edit_url }}" class="button btn btn-warning"><i class="fa fa-fw fa-pencil"></i></a>
                                                    </td>
                                                    <td>
                                                        <a href="{{ p.get_draft_toggle_url }}" class="button btn btn-danger"><i class="fa fa-fw fa-clipboard"></i></a>
                                                    </td>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                                <br>
                            </div>
                            <!-- /.table div for all story -->
                        {% endif %}
                    {% endif %}
                </div>
                <!-- /.row -->
            </div>
            <!-- /.container-fluid -->
        </div>
        {% include 'footer.html' %}
        <!-- /#page-wrapper -->
    </div>
    <!-- /#wrapper -->
{% endblock content_header %}
</body>

</html>
